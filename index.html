<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>YAPL — Yet Another Prompt Language</title>
    <meta
      name="description"
      content="YAPL is a tiny, composable prompt templating language with blocks, traits, and variables — designed for AI agents."
    />
    <meta property="og:title" content="YAPL — Yet Another Prompt Language" />
    <meta
      property="og:description"
      content="Blocks, traits, variables. Markdown-first. Built for AI agents."
    />
    <meta property="og:type" content="website" />
    <meta name="theme-color" content="#f472b6" />

    <!-- Favicon: inline SVG YAPL badge -->
    <link rel="icon" type="image/png" href="./yapl-logo.png" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Tailwind (CDN) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              brand: {
                50: "#fff1f8",
                100: "#ffe4f1",
                200: "#fec7e3",
                300: "#fea3d1",
                400: "#fc77bb",
                500: "#f472b6",
                600: "#e11d48",
                700: "#be185d",
                800: "#9d174d",
                900: "#831843",
              },
            },
            boxShadow: {
              glow: "0 0 0 3px rgba(244,114,182,0.25), 0 20px 50px -20px rgba(244,114,182,0.45)",
            },
            fontFamily: {
              sans: ["Inter", "ui-sans-serif", "system-ui"],
              mono: [
                "JetBrains Mono",
                "ui-monospace",
                "SFMono-Regular",
                "Menlo",
                "monospace",
              ],
            },
          },
        },
      };
    </script>

    <!-- Prism for code highlighting -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/prismjs@1.29.0/themes/prism-tomorrow.min.css"
    />
    <script
      defer
      src="https://unpkg.com/prismjs@1.29.0/components/prism-core.min.js"
    ></script>
    <script
      defer
      src="https://unpkg.com/prismjs@1.29.0/plugins/autoloader/prism-autoloader.min.js"
    ></script>

    <style>
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, #fc77bb, #be185d);
        border-radius: 8px;
      }
      ::-webkit-scrollbar-track {
        background: transparent;
      }
      .anchor {
        opacity: 0;
        transition: opacity 0.2s ease;
        margin-left: 0.375rem;
      }
      h2:hover .anchor,
      h3:hover .anchor {
        opacity: 1;
      }
      .blob {
        filter: blur(60px);
        opacity: 0.35;
      }
      .btn {
        border-radius: 0.75rem;
        padding: 0.75rem 1.25rem;
        font-weight: 600;
        font-size: 0.9rem;
      }
    </style>

    <!-- Sandpack theme overrides to support light/dark and match site palette -->
    <style>
      /* Base (light) theme for Sandpack */
      html .sp-wrapper {
        --sp-font-family: JetBrains Mono, ui-monospace, SFMono-Regular, Menlo,
          monospace;
        --sp-font-size: 12.5px;

        /* Colors aligned with site (Tailwind gray + brand pinks) */
        --sp-colors-fg: #111827; /* gray-900 */
        --sp-colors-bg: #ffffff; /* white */
        --sp-colors-surface1: #f8fafc; /* slate-50 */
        --sp-colors-surface2: #f1f5f9; /* slate-100 */
        --sp-colors-surface3: #e2e8f0; /* slate-200 */
        --sp-colors-accent: #f472b6; /* brand-500 */
        --sp-colors-clickable: #374151; /* gray-700 */
        --sp-colors-disabled: #9ca3af; /* gray-400 */
        --sp-colors-warning: #f59e0b; /* amber-500 */
        --sp-colors-error: #ef4444; /* red-500 */
        --sp-colors-success: #10b981; /* emerald-500 */

        /* Syntax highlighting (CodeMirror) */
        --sp-syntax-plain: #111827; /* plain text */
        --sp-syntax-comment: #94a3b8; /* slate-400 */
        --sp-syntax-constant: #9333ea; /* purple-600 */
        --sp-syntax-entity: #2563eb; /* blue-600 */
        --sp-syntax-keyword: #db2777; /* rose-600 */
        --sp-syntax-storage: #db2777; /* rose-600 */
        --sp-syntax-string: #16a34a; /* green-600 */
        --sp-syntax-support: #2563eb; /* blue-600 */
        --sp-syntax-variable: #ea580c; /* orange-600 */
        --sp-syntax-punctuation: #334155; /* slate-700 */
        --sp-syntax-operator: #0ea5e9; /* sky-500 */
        --sp-syntax-function: #7c3aed; /* violet-600 */
        --sp-syntax-class: #1d4ed8; /* blue-700 */
        --sp-syntax-tag: #db2777; /* rose-600 */
        --sp-syntax-attribute: #0284c7; /* sky-600 */
        --sp-syntax-number: #b45309; /* amber-700 */
        --sp-syntax-regexp: #059669; /* emerald-600 */
        --sp-syntax-type: #0ea5e9; /* sky-500 */
        --sp-syntax-builtin: #0ea5e9; /* sky-500 */
        --sp-syntax-definition: #2563eb; /* blue-600 */
        --sp-syntax-property: #0284c7; /* sky-600 */
      }

      /* Dark theme for Sandpack (follows html.dark set by the site toggle) */
      .dark .sp-wrapper {
        --sp-colors-fg: #e5e7eb; /* gray-200 */
        --sp-colors-bg: #0b0f1a; /* deep background to blend with gray-950 */
        --sp-colors-surface1: #0f172a; /* slate-900 */
        --sp-colors-surface2: #111827; /* gray-900 */
        --sp-colors-surface3: #1f2937; /* gray-800 */
        --sp-colors-accent: #f472b6; /* brand-500 */
        --sp-colors-clickable: #d1d5db; /* gray-300 */
        --sp-colors-disabled: #6b7280; /* gray-500 */
        --sp-colors-warning: #f59e0b; /* amber-500 */
        --sp-colors-error: #f87171; /* red-400 */
        --sp-colors-success: #34d399; /* emerald-400 */

        --sp-syntax-plain: #e5e7eb; /* plain text */
        --sp-syntax-comment: #9ca3af; /* gray-400/500 */
        --sp-syntax-constant: #c084fc; /* purple-400 */
        --sp-syntax-entity: #93c5fd; /* blue-300 */
        --sp-syntax-keyword: #fb7185; /* rose-400 */
        --sp-syntax-storage: #fb7185; /* rose-400 */
        --sp-syntax-string: #4ade80; /* green-400 */
        --sp-syntax-support: #93c5fd; /* blue-300 */
        --sp-syntax-variable: #fdba74; /* orange-300 */
        --sp-syntax-punctuation: #9ca3af; /* gray-400 */
        --sp-syntax-operator: #7dd3fc; /* sky-300 */
        --sp-syntax-function: #c084fc; /* purple-400 */
        --sp-syntax-class: #93c5fd; /* blue-300 */
        --sp-syntax-tag: #fb7185; /* rose-400 */
        --sp-syntax-attribute: #7dd3fc; /* sky-300 */
        --sp-syntax-number: #fbbf24; /* amber-400 */
        --sp-syntax-regexp: #34d399; /* emerald-400 */
        --sp-syntax-type: #7dd3fc; /* sky-300 */
        --sp-syntax-builtin: #7dd3fc; /* sky-300 */
        --sp-syntax-definition: #93c5fd; /* blue-300 */
        --sp-syntax-property: #7dd3fc; /* sky-300 */
      }

      /* Blend Sandpack surfaces and borders with the site's cards */
      .sp-layout,
      .sp-code-editor,
      .sp-tabs,
      .sp-console,
      .sp-preview {
        border-radius: 12px;
        border: 1px solid rgba(148, 163, 184, 0.25); /* slate-400 @ 25% */
        background: var(--sp-colors-surface1);
        color: var(--sp-colors-fg);
      }
      .dark .sp-layout,
      .dark .sp-code-editor,
      .dark .sp-tabs,
      .dark .sp-console,
      .dark .sp-preview {
        border-color: rgba(31, 41, 55, 0.9); /* gray-800 */
      }

      /* Active tab accent matches brand */
      html .sp-wrapper {
        color: var(--sp-colors-fg);
      }
      .sp-tabs .sp-tab-button--active {
        color: var(--sp-colors-accent);
      }
      .sp-tabs .sp-tab-button,
      .sp-button {
        color: var(--sp-colors-fg);
      }
      .sp-tab-button {
        border-radius: 8px;
      }
      .sp-tabs .sp-tab-button--active {
        background: color-mix(
          in oklab,
          var(--sp-colors-accent) 18%,
          transparent
        );
      }
      .dark .sp-tabs .sp-tab-button--active {
        background: color-mix(
          in oklab,
          var(--sp-colors-accent) 22%,
          transparent
        );
      }
      .sp-tab-button:focus-visible {
        outline: 2px solid
          color-mix(in oklab, var(--sp-colors-accent) 60%, transparent);
      }
      .sp-code-editor pre,
      .sp-code-editor code {
        color: var(--sp-colors-fg) !important;
      }

      /* Ensure CodeMirror picks up our vars immediately */
      .cm-editor {
        background: var(--sp-colors-surface1) !important;
        color: var(--sp-syntax-plain, var(--sp-colors-fg)) !important;
      }
      .cm-scroller {
        color: var(--sp-syntax-plain, var(--sp-colors-fg)) !important;
      }
      .cm-gutters {
        background: var(--sp-colors-surface2) !important;
        border-right-color: rgba(148, 163, 184, 0.2) !important;
        color: var(--sp-syntax-plain, var(--sp-colors-fg)) !important;
      }
      .cm-content {
        color: var(--sp-syntax-plain, var(--sp-colors-fg)) !important;
      }
      .cm-line {
        color: var(--sp-syntax-plain, var(--sp-colors-fg)) !important;
      }
      .cm-cursor,
      .cm-dropCursor {
        border-left-color: var(--sp-colors-fg) !important;
      }

      /* Make focus/selection align with brand */
      .cm-selectionBackground,
      .cm-content ::selection {
        background: color-mix(
          in srgb,
          var(--sp-colors-accent) 30%,
          transparent
        );
      }
      .sp-button:focus-visible,
      .sp-tab-button:focus-visible {
        outline: 2px solid
          color-mix(in srgb, var(--sp-colors-accent) 60%, transparent);
        outline-offset: 2px;
      }
    </style>
  </head>

  <body
    class="bg-white text-gray-800 dark:bg-gray-950 dark:text-gray-100 antialiased"
  >
    <!-- Navbar -->
    <header
      class="sticky top-0 z-50 backdrop-blur supports-[backdrop-filter]:bg-white/60 bg-white/85 dark:bg-gray-950/70 border-b border-white/0 dark:border-gray-800"
    >
      <nav class="mx-auto max-w-7xl px-4">
        <div class="flex items-center justify-between py-3">
          <a href="#" class="flex items-center gap-3 group">
            <!-- Brand icon -->
            <img
              alt="YAPL logo"
              class="w-9 h-9 rounded-xl shadow-glow"
              src="./yapl-logo.png"
            />
            <span
              class="text-lg font-extrabold tracking-tight bg-gradient-to-r from-pink-600 to-rose-500 bg-clip-text text-transparent"
              >YAPL</span
            >
          </a>

          <div class="hidden md:flex items-center gap-6">
            <a class="navlink text-sm hover:text-pink-600" href="#why"
              >Why YAPL</a
            >
            <a class="navlink text-sm hover:text-pink-600" href="#install"
              >Install</a
            >
            <a class="navlink text-sm hover:text-pink-600" href="#playground"
              >Playground</a
            >
            <a class="navlink text-sm hover:text-pink-600" href="#faq">FAQ</a>
            <!-- VS Code Extension link -->
            <a
              class="text-sm hover:text-pink-600 flex items-center gap-2"
              href="https://marketplace.visualstudio.com/items?itemName=EinfachAI.yapl"
              target="_blank"
              rel="noopener"
            >
              <img alt="" class="w-4 h-4" src="/vscode-logo.webp" />
              VS Code Extension
            </a>
            <a
              href="https://github.com/yapl-language/yapl.ts"
              target="_blank"
              rel="noopener"
              aria-label="GitHub"
              class="p-2 rounded-lg border border-gray-200 hover:border-pink-300 dark:border-gray-700 dark:hover:border-pink-700"
            >
              <svg
                class="w-5 h-5"
                viewBox="0 0 24 24"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M12 .5a12 12 0 0 0-3.79 23.4c.6.11.82-.26.82-.58l-.02-2.02c-3.34.73-4.04-1.61-4.04-1.61-.55-1.39-1.35-1.76-1.35-1.76-1.1-.75.08-.74.08-.74 1.22.08 1.86 1.26 1.86 1.26 1.08 1.86 2.83 1.32 3.52 1.01.11-.8.42-1.32.76-1.63-2.66-.3-5.46-1.33-5.46-5.92 0-1.31.47-2.38 1.24-3.22-.13-.3-.54-1.52.12-3.17 0 0 1.01-.32 3.3 1.23a11.4 11.4 0 0 1 6 0c2.3-1.55 3.31-1.23 3.31-1.23.66 1.65.25 2.87.12 3.17.77.84 1.24 1.91 1.24 3.22 0 4.6-2.8 5.61-5.48 5.91.43.37.81 1.1.81 2.22l-.01 3.29c0 .32.21.7.82.58A12 12 0 0 0 12 .5Z"
                />
              </svg>
            </a>
            <a
              href="https://discord.com/invite/R5CsJHxTeZ"
              target="_blank"
              rel="noopener"
              aria-label="Discord"
              class="p-2 rounded-lg border border-gray-200 hover:border-pink-300 dark:border-gray-700 dark:hover:border-pink-700"
            >
              <svg
                class="w-5 h-5"
                viewBox="0 0 24 24"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M20.317 4.369A19.791 19.791 0 0 0 16.558 3c-.2.36-.43.85-.59 1.23a18.27 18.27 0 0 0-7.937 0c-.16-.38-.39-.87-.59-1.23-1.33.24-2.64.67-3.759 1.37C.533 9.054-.32 13.62.099 18.129A19.8 19.8 0 0 0 6.08 20.5c.48-.66.908-1.369 1.273-2.117-.7-.266-1.367-.592-2.003-.972.168-.12.334-.245.495-.372 3.761 1.757 7.842 1.757 11.562 0 .162.128.328.252.495.372-.636.38-1.302.706-2.003.972.365.748.793 1.457 1.273 2.117a19.8 19.8 0 0 0 5.98-2.371c.49-5.242-.837-9.769-3.837-13.76ZM8.02 15.33c-1.106 0-2.005-1.02-2.005-2.276 0-1.257.89-2.276 2.005-2.276 1.125 0 2.014 1.03 2.005 2.276 0 1.256-.89 2.276-2.005 2.276Zm7.96 0c-1.106 0-2.005-1.02-2.005-2.276 0-1.257.89-2.276 2.005-2.276 1.125 0 2.014 1.03 2.005 2.276 0 1.256-.88 2.276-2.005 2.276Z"
                />
              </svg>
            </a>
            <button
              id="themeToggle"
              class="rounded-lg px-3 py-2 text-sm border border-gray-200 hover:border-pink-300 dark:border-gray-700 dark:hover:border-pink-700"
              aria-label="Toggle theme"
            >
              🌙
            </button>
            <a
              href="https://yapl-language.github.io/documentation"
              class="inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-brand-500 to-rose-500 px-4 py-2 text-white text-sm font-semibold shadow-glow hover:opacity-95 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pink-300"
            >
              <svg
                class="w-5 h-5"
                viewBox="0 0 24 24"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M12 5c-1.657-1.104-3.843-2-6-2-1.105 0-2 .895-2 2v11c0 1.105.895 2 2 2 2.157 0 4.343.896 6 2 1.657-1.104 3.843-2 6-2 1.105 0 2-.895 2-2V5c0-1.105-.895-2-2-2-2.157 0-4.343.896-6 2zM6 6c1.99 0 3.98.66 6 2v9c-2.02-1.34-4.01-2-6-2V6zm12 0v9c-1.99 0-3.98.66-6 2V8c2.02-1.34 4.01-2 6-2z"
                />
              </svg>
              Documentation</a
            >
          </div>

          <button
            id="mobileMenuBtn"
            class="md:hidden rounded-lg border px-3 py-2 text-sm border-gray-200 dark:border-gray-700"
            aria-label="Open Menu"
          >
            Menu
          </button>
        </div>

        <div id="mobileMenu" class="md:hidden hidden pb-3">
          <div class="grid gap-2">
            <a
              class="block px-3 py-2 rounded hover:bg-pink-50 dark:hover:bg-gray-800"
              href="#why"
              >Why YAPL</a
            >
            <a
              class="block px-3 py-2 rounded hover:bg-pink-50 dark:hover:bg-gray-800"
              href="#install"
              >Install</a
            >
            <a
              class="block px-3 py-2 rounded hover:bg-pink-50 dark:hover:bg-gray-800"
              href="#playground"
              >Playground</a
            >
            <a
              class="block px-3 py-2 rounded hover:bg-pink-50 dark:hover:bg-gray-800"
              href="#faq"
              >FAQ</a
            >
            <a
              class="block px-3 py-2 rounded hover:bg-pink-50 dark:hover:bg-gray-800"
              href="https://marketplace.visualstudio.com/items?itemName=EinfachAI.yapl"
              target="_blank"
              rel="noopener"
              >VS Code Extension</a
            >
            <div class="flex items-center gap-2 px-3 pt-2">
              <button
                id="themeToggleMobile"
                class="rounded-lg px-3 py-2 text-sm border border-gray-200 dark:border-gray-700"
                aria-label="Toggle theme"
              >
                🌙
              </button>
              <a
                href="#get-started"
                class="inline-flex items-center gap-2 rounded-xl bg-gradient-to-r from-brand-500 to-rose-500 px-4 py-2 text-white text-sm font-semibold shadow-glow"
                >Get Started</a
              >
            </div>
          </div>
        </div>
      </nav>
    </header>

    <!-- Hero -->
    <section id="get-started" class="relative">
      <div class="mx-auto max-w-7xl px-4 py-16 sm:py-20">
        <div class="grid md:grid-cols-2 gap-10 items-start h-[570px]">
          <div>
            <h1 class="text-4xl md:text-6xl font-extrabold leading-tight">
              A tiny,
              <span
                class="bg-gradient-to-r from-pink-600 to-rose-500 bg-clip-text text-transparent"
                >pink-powered</span
              >
              prompt language.
            </h1>
            <p class="mt-5 text-lg text-gray-600 dark:text-gray-300">
              <strong
                >YAPL is a text-based templating language built for the future
                of AI agents.</strong
              >
              YAPL makes prompt design composable and scalable: define
              <strong>blocks</strong> once, extend with
              <strong>mixins</strong> and <strong>inheritance</strong>, and
              inject <strong>variables</strong> seamlessly. Write less, reuse
              more — because the future of agents deserves better prompts.
            </p>
            <div class="mt-6 flex flex-wrap gap-3">
              <a
                href="#install"
                class="btn flex items-center gap-2 bg-gray-900 text-white dark:bg-white dark:text-gray-900 hover:opacity-95"
              >
                <svg
                  class="w-5 h-5"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path
                    d="M12 3a1 1 0 0 1 1 1v8.586l2.293-2.293a1 1 0 1 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 1 1 1.414-1.414L11 12.586V4a1 1 0 0 1 1-1Z"
                  />
                  <path
                    d="M5 20a2 2 0 0 1-2-2v-1a1 1 0 1 1 2 0v1h14v-1a1 1 0 1 1 2 0v1a2 2 0 0 1-2 2H5Z"
                  />
                </svg>
                Install</a
              >
              <a
                href="#playground"
                class="btn flex items-center gap-2 border border-gray-300 dark:border-gray-700 hover:border-pink-400 dark:hover:border-pink-600"
              >
                <svg
                  class="w-5 h-5"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path
                    d="M8 5a3 3 0 0 0-3 3v8a1 1 0 1 0 2 0v-2h10v2a1 1 0 1 0 2 0V8a3 3 0 0 0-3-3H8Zm9 7H7V8a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v4Z"
                  />
                  <path
                    d="M10.5 9.5v2.75a.75.75 0 0 0 1.125.65l2.25-1.375a.75.75 0 0 0 0-1.3l-2.25-1.375a.75.75 0 0 0-1.125.65Z"
                  />
                </svg>

                Playground</a
              >
              <a
                href="https://marketplace.visualstudio.com/items?itemName=EinfachAI.yapl"
                target="_blank"
                rel="noopener"
                class="btn flex items-center gap-2 bg-gradient-to-r from-brand-500 to-rose-500 text-white shadow-glow hover:opacity-95 flex items-center gap-2"
              >
                <svg
                  class="w-5 h-5"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                  aria-hidden="true"
                >
                  <path
                    d="M12 5c-1.657-1.104-3.843-2-6-2-1.105 0-2 .895-2 2v11c0 1.105.895 2 2 2 2.157 0 4.343.896 6 2 1.657-1.104 3.843-2 6-2 1.105 0 2-.895 2-2V5c0-1.105-.895-2-2-2-2.157 0-4.343.896-6 2zM6 6c1.99 0 3.98.66 6 2v9c-2.02-1.34-4.01-2-6-2V6zm12 0v9c-1.99 0-3.98.66-6 2V8c2.02-1.34 4.01-2 6-2z"
                  />
                </svg>

                Documentation
              </a>
            </div>
            <div
              class="mt-6 flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400"
            >
              <span>Inspired by Twig</span> • <span>MIT Licensed</span> •
              <span>From AI for AI</span>
            </div>
          </div>

          <div class="relative">
            <div
              class="absolute -inset-3 rounded-3xl bg-gradient-to-tr from-pink-500/20 via-fuchsia-500/20 to-rose-500/20 blur-2xl"
            ></div>
            <div
              class="relative rounded-2xl border border-white/60 dark:border-gray-800 bg-white/70 dark:bg-gray-900/50 backdrop-blur p-4 shadow-glow"
            >
              <div class="flex items-center justify-between px-3 py-2">
                <div class="flex items-center gap-3">
                  <div class="flex items-center gap-1.5">
                    <span class="w-3 h-3 rounded-full bg-rose-400"></span>
                    <span class="w-3 h-3 rounded-full bg-pink-400"></span>
                    <span class="w-3 h-3 rounded-full bg-fuchsia-400"></span>
                  </div>
                  <div
                    class="inline-flex rounded-lg border border-gray-200 dark:border-gray-800 overflow-hidden"
                  >
                    <button
                      class="code-tab px-3 py-1.5 text-xs font-semibold bg-pink-100 text-pink-900 dark:bg-pink-900/30 dark:text-pink-100"
                      data-code="json"
                      aria-selected="true"
                    >
                      JSON
                    </button>
                    <button
                      class="code-tab px-3 py-1.5 text-xs font-semibold hover:bg-gray-100 dark:hover:bg-gray-800"
                      data-code="markdown"
                    >
                      Markdown
                    </button>
                    <button
                      class="code-tab px-3 py-1.5 text-xs font-semibold hover:bg-gray-100 dark:hover:bg-gray-800"
                      data-code="text"
                    >
                      Text
                    </button>
                  </div>
                </div>
                <span id="codeTitle" class="text-xs text-gray-500"
                  >hello.json.yapl</span
                >
              </div>
              <div class="mt-2">
                <pre
                  class="relative codepanel"
                  data-code="json"
                ><button class="copy-btn absolute right-3 top-3 text-xs rounded-lg px-2 py-1 border border-gray-700/30 hover:border-pink-500/60">Copy</button><code class="language-json text-[13px]">{
"blocks": {
  "system": "You are an expert code reviewer with deep knowledge of {{ language | default(\"programming\") }}.",
  "guidance": [
      "Focus on code quality, security, and best practices",
      "Provide specific, actionable feedback",
      {% if experience_level == \"junior\" %}
        "Explain the reasoning behind your suggestions"
      {% endif %}
  ],
  "snippets": [
    {% for snippet in snippets %}
      {
        {{ snippet }}
      }
    {% endfor %}"
  ]
}</code></pre>

                <pre
                  class="relative codepanel hidden"
                  data-code="markdown"
                ><button class="copy-btn absolute right-3 top-3 text-xs rounded-lg px-2 py-1 border border-gray-700/30 hover:border-pink-500/60">Copy</button><code class="language-markdown text-[13px]">### System
You are an expert code reviewer with deep knowledge of {{ language | default("programming") }}.

### Guidance
- Focus on code quality, security, and best practices
- Provide specific, actionable feedback
{% if experience_level == "junior" %}
  - Explain the reasoning behind your suggestions
{% endif %}

### Snippets
Review the following code snippets:
{% for snippet in snippets %}
  {{ snippet }}
{% endfor %}</code></pre>

                <pre
                  class="relative codepanel hidden"
                  data-code="text"
                ><button class="copy-btn absolute right-3 top-3 text-xs rounded-lg px-2 py-1 border border-gray-700/30 hover:border-pink-500/60">Copy</button><code class="language-none text-[13px]">SYSTEM:
You are an expert code reviewer with deep knowledge of {{ language | default("programming") }}.

GUIDANCE:
- Focus on code quality, security, and best practices
- Provide specific, actionable feedback
{% If experience_level == "junior" %}
  Explain the reasoning behind your suggestions
{% endif %}
  SNIPPETS:
  Review the following code snippets:
{% for snippet in snippets %}
  {{ snippet }}
{% endfor %}</code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Why -->
    <section id="why" class="mx-auto max-w-7xl px-4 py-12">
      <h2 class="text-2xl md:text-3xl font-extrabold flex items-center">
        Why YAPL
        <a
          href="#why"
          class="anchor text-pink-500"
          aria-label="Link to Why YAPL"
          >#</a
        >
      </h2>
      <p class="mt-2 text-gray-600 dark:text-gray-300">
        Everything you need to write structured and reusable prompts.
      </p>

      <div class="mt-8 grid sm:grid-cols-2 lg:grid-cols-3 gap-6">
        <div
          class="rounded-2xl border border-gray-200 dark:border-gray-800 p-6 bg-white/60 dark:bg-gray-900/40"
        >
          <div
            class="w-10 h-10 grid place-items-center rounded-lg bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-200 mb-3"
          >
            🧱
          </div>
          <h3 class="font-semibold">Template Inheritance</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
            Create base templates and extend them with
            <code class="font-mono">{% extends %}</code>. Override specific
            blocks while inheriting structure.
          </p>
        </div>
        <div
          class="rounded-2xl border border-gray-200 dark:border-gray-800 p-6 bg-white/60 dark:bg-gray-900/40"
        >
          <div
            class="w-10 h-10 grid place-items-center rounded-lg bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-200 mb-3"
          >
            🧬
          </div>
          <h3 class="font-semibold">Mixins</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
            Compose templates from reusable components with
            <code class="font-mono">{% mixin %}</code>. Add safety, personality,
            or capabilities without duplication.
          </p>
        </div>
        <div
          class="rounded-2xl border border-gray-200 dark:border-gray-800 p-6 bg-white/60 dark:bg-gray-900/40"
        >
          <div
            class="w-10 h-10 grid place-items-center rounded-lg bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-200 mb-3"
          >
            🧩
          </div>
          <h3 class="font-semibold">Variables & Defaults</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
            Dynamic interpolation with
            <code class="font-mono">{{"{{ var | default(\"value\") }}"}}</code>.
            Nested object access and safe rendering.
          </p>
        </div>
        <div
          class="rounded-2xl border border-gray-200 dark:border-gray-800 p-6 bg-white/60 dark:bg-gray-900/40"
        >
          <div
            class="w-10 h-10 grid place-items-center rounded-lg bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-200 mb-3"
          >
            🔀
          </div>
          <h3 class="font-semibold">Conditionals & Loops</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
            Adaptive prompts with
            <code class="font-mono">{% if %}</code> statements and
            <code class="font-mono">{% for %}</code> loops. Context-aware
            content generation.
          </p>
        </div>
        <div
          class="rounded-2xl border border-gray-200 dark:border-gray-800 p-6 bg-white/60 dark:bg-gray-900/40"
        >
          <div
            class="w-10 h-10 grid place-items-center rounded-lg bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-200 mb-3"
          >
            📦
          </div>
          <h3 class="font-semibold">Modular Components</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
            Break templates into reusable pieces with
            <code class="font-mono">{% include %}</code>. Build component
            libraries for consistent prompts.
          </p>
        </div>
        <div
          class="rounded-2xl border border-gray-200 dark:border-gray-800 p-6 bg-white/60 dark:bg-gray-900/40"
        >
          <div
            class="w-10 h-10 grid place-items-center rounded-lg bg-pink-100 text-pink-700 dark:bg-pink-900/30 dark:text-pink-200 mb-3"
          >
            ⚡
          </div>
          <h3 class="font-semibold">Universal Runtime</h3>
          <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
            Works in Node.js and browsers. File system integration, caching, and
            precise whitespace control for clean output.
          </p>
        </div>
      </div>
    </section>

    <!-- Install -->
    <section id="install" class="mx-auto max-w-7xl px-4 py-12">
      <h2 class="text-2xl md:text-3xl font-extrabold flex items-center">
        Install
        <a
          href="#install"
          class="anchor text-pink-500"
          aria-label="Link to Install"
          >#</a
        >
      </h2>
      <p class="mt-2 text-gray-600 dark:text-gray-300">
        Pick your environment. YAPL ships a CLI and a tiny JS runtime.
      </p>

      <div
        class="mt-6 rounded-2xl border border-gray-200 dark:border-gray-800 bg-white/60 dark:bg-gray-900/40 overflow-hidden"
      >
        <div
          class="flex flex-wrap items-center gap-2 border-b border-gray-200/70 dark:border-gray-800/80 px-3 py-2"
        >
          <button
            class="tab px-3 py-1.5 text-sm rounded-lg bg-pink-100 text-pink-900 dark:bg-pink-900/30 dark:text-pink-100"
            data-tab="npm"
          >
            npm
          </button>
          <button
            class="tab px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800"
            data-tab="pnpm"
          >
            pnpm
          </button>
          <button
            class="tab px-3 py-1.5 text-sm rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800"
            data-tab="bun"
          >
            bun
          </button>
        </div>
        <div class="p-4">
          <div class="tabpanel" data-panel="npm">
            <pre
              class="relative"
            ><button class="copy-btn absolute right-3 top-3 text-xs rounded-lg px-2 py-1 border border-gray-700/30 hover:border-pink-500/60">Copy</button><code class="language-bash">npm i @yapl-language/yapl.ts</code></pre>
          </div>
          <div class="tabpanel hidden" data-panel="pnpm">
            <pre
              class="relative"
            ><button class="copy-btn absolute right-3 top-3 text-xs rounded-lg px-2 py-1 border border-gray-700/30 hover:border-pink-500/60">Copy</button><code class="language-bash">pnpm add @yapl-language/yapl.ts</code></pre>
          </div>
          <div class="tabpanel hidden" data-panel="bun">
            <pre
              class="relative"
            ><button class="copy-btn absolute right-3 top-3 text-xs rounded-lg px-2 py-1 border border-gray-700/30 hover:border-pink-500/60">Copy</button><code class="language-bash">bun add @yapl-language/yapl.ts</code></pre>
          </div>
        </div>
      </div>
    </section>

    <!-- Playground -->
    <section id="playground" class="mx-auto max-w-7xl px-4 py-12">
      <h2 class="text-2xl md:text-3xl font-extrabold flex items-center">
        Playground
        <a
          href="#playground"
          class="anchor text-pink-500"
          aria-label="Link to Playground"
          >#</a
        >
      </h2>
      <p class="mt-2 text-gray-600 dark:text-gray-300">
        This simple client-side demo renders variables and basic blocks.<br />
        <strong>New:</strong> Try the interactive playground powered by Sandpack
        below!
      </p>

      <div class="my-8">
        <div id="sandpack-root"></div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq" class="mx-auto max-w-7xl px-4 py-12">
      <h2 class="text-2xl md:text-3xl font-extrabold flex items-center">
        FAQ
        <a href="#faq" class="anchor text-pink-500" aria-label="Link to FAQ"
          >#</a
        >
      </h2>
      <div class="mt-4 grid lg:grid-cols-2 gap-4">
        <details
          class="rounded-xl border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-900/40"
        >
          <summary class="cursor-pointer font-semibold">
            How does template inheritance work?
          </summary>
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
            Use <code class="font-mono">{% extends "parent.yapl" %}</code> to
            inherit structure, then override specific
            <code class="font-mono">{% block %}</code> sections. Use
            <code class="font-mono">{{ super() }}</code> to include parent
            content.
          </p>
        </details>
        <details
          class="rounded-xl border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-900/40"
        >
          <summary class="cursor-pointer font-semibold">
            What's the difference between mixins and inheritance?
          </summary>
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
            Inheritance creates parent-child relationships with
            <code class="font-mono">{% extends %}</code>. Mixins use
            <code class="font-mono">{% mixin %}</code> for composition, letting
            you combine multiple behaviors like safety guidelines or personality
            traits.
          </p>
        </details>
        <details
          class="rounded-xl border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-900/40"
        >
          <summary class="cursor-pointer font-semibold">
            Can I use YAPL in the browser?
          </summary>
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
            Yes! YAPL works in both Node.js and browsers. The browser version
            requires custom <code class="font-mono">loadFile</code> and
            <code class="font-mono">resolvePath</code>
            functions since it can't access the file system directly.
          </p>
        </details>
        <details
          class="rounded-xl border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-900/40"
        >
          <summary class="cursor-pointer font-semibold">
            What file extensions should I use?
          </summary>
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
            Use <code class="font-mono">.yapl</code> for templates. Common
            patterns include <code class="font-mono">.md.yapl</code> for
            Markdown prompts and <code class="font-mono">.json.yapl</code> for
            structured data templates.
          </p>
        </details>
        <details
          class="rounded-xl border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-900/40"
        >
          <summary class="cursor-pointer font-semibold">
            How do I handle missing variables?
          </summary>
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
            Always provide defaults:
            <code class="font-mono"
              >{{"{{ name | default(\"Assistant\") }}"}}</code
            >. Use <code class="font-mono">{% if var is defined %}</code> to
            check existence, or
            <code class="font-mono">{% if var is not empty %}</code> for
            non-empty values.
          </p>
        </details>
        <details
          class="rounded-xl border border-gray-200 dark:border-gray-800 p-4 bg-white/60 dark:bg-gray-900/40"
        >
          <summary class="cursor-pointer font-semibold">
            Is there VS Code support?
          </summary>
          <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
            Yes! Install the YAPL extension from the VS Code Marketplace for
            syntax highlighting, snippets, and file icons. LSP support for
            advanced features is planned.
          </p>
        </details>
      </div>
    </section>

    <!-- VS Code section (icon download) -->
    <section id="vscode" class="mx-auto max-w-7xl px-4 py-12">
      <h2 class="text-2xl md:text-3xl font-extrabold flex items-center">
        VS Code Extension
        <a
          href="#vscode"
          class="anchor text-pink-500"
          aria-label="Link to VS Code Extension"
          >#</a
        >
      </h2>
      <div class="mt-4 grid gap-6 sm:grid-cols-2">
        <a
          href="https://marketplace.visualstudio.com/items?itemName=EinfachAI.yapl"
          target="_blank"
          rel="noopener"
          class="group rounded-2xl border border-gray-200 dark:border-gray-800 bg-white/60 dark:bg-gray-900/40 p-6 flex items-center gap-4 hover:border-[#21aaf2] dark:hover:border-[#21aaf2]"
        >
          <img
            alt="YAPL VS Code icon"
            class="w-14 h-14 rounded-xl"
            src="/vscode-logo.webp"
          />
          <div>
            <div class="font-semibold">
              Install from Visual Studio Marketplace
            </div>
            <div class="text-sm text-gray-600 dark:text-gray-400">
              Syntax, snippets, and future LSP diagnostics.
            </div>
          </div>
        </a>
        <a
          href="https://marketplace.visualstudio.com/items?itemName=EinfachAI.yapl"
          target="_blank"
          rel="noopener"
          class="group rounded-2xl border border-gray-200 dark:border-gray-800 bg-white/60 dark:bg-gray-900/40 p-6 flex items-center gap-4 hover:border-[#C260EE] dark:hover:border-[#C260EE]"
        >
          <img
            alt="YAPL VS Code icon"
            class="w-14 h-14 rounded-xl"
            src="/openvsx-logo.png"
          />
          <div>
            <div class="font-semibold">Install from Open VSX Registry</div>
            <div class="text-sm text-gray-600 dark:text-gray-400">
              Syntax, snippets, and future LSP diagnostics.
            </div>
          </div>
        </a>
      </div>
    </section>

    <!-- Footer -->
    <footer class="border-t border-gray-200 dark:border-gray-800">
      <div
        class="mx-auto max-w-7xl px-4 py-8 flex flex-col sm:flex-row items-center justify-between gap-3"
      >
        <p class="text-sm text-gray-600 dark:text-gray-400">
          © <span id="year"></span> YAPL. Made with 💗
        </p>
        <div class="flex items-center gap-4 text-sm">
          <a
            href="https://yapl-language.github.io/documentation"
            class="hover:text-pink-600"
            >Docs</a
          >
          <a href="#playground" class="hover:text-pink-600">Playground</a>
          <a
            href="https://marketplace.visualstudio.com/items?itemName=EinfachAI.yapl"
            target="_blank"
            rel="noopener"
            class="hover:text-pink-600"
            >VS Code Extension</a
          >
          <a
            href="https://github.com/yapl-language/yapl.ts"
            class="hover:text-pink-600"
            >GitHub</a
          >
          <a
            href="https://discord.com/invite/R5CsJHxTeZ"
            target="_blank"
            rel="noopener"
            class="hover:text-pink-600"
            >Discord</a
          >
        </div>
      </div>
    </footer>

    <!-- Scroll-to-top -->
    <button
      id="toTop"
      class="fixed bottom-6 right-6 hidden rounded-full p-3 shadow-glow bg-gradient-to-r from-brand-500 to-rose-500 text-white"
      aria-label="Scroll to top"
    >
      ↑
    </button>

    <!-- Scripts -->
    <script type="module" src="/main.jsx"></script>
    <script>
      // tiny helpers
      const $ = (s, scope = document) => scope.querySelector(s);
      const $$ = (s, scope = document) => Array.from(scope.querySelectorAll(s));
      const showToast = (msg = "Copied!") => {
        const t = $("#toast");
        if (!t) return;
        const span = t.querySelector("span");
        if (span) span.textContent = msg;
        t.classList.remove("hidden");
        clearTimeout(showToast._t);
        showToast._t = setTimeout(() => t.classList.add("hidden"), 1200);
      };

      // theme
      const applyTheme = (t) => {
        const prefersDark = window.matchMedia(
          "(prefers-color-scheme: dark)"
        ).matches;
        const shouldDark = t === "dark" || (t === "auto" && prefersDark);
        document.documentElement.classList.toggle("dark", shouldDark);
      };

      const updateThemeButtons = () => {
        const isDark = document.documentElement.classList.contains("dark");
        const icon = isDark ? "🌙" : "☀️";
        const label = isDark ? "Switch to light mode" : "Switch to dark mode";
        const btns = [$("#themeToggle"), $("#themeToggleMobile")];
        btns.forEach((b) => {
          if (!b) return;
          b.textContent = icon;
          b.setAttribute("aria-label", label);
        });
      };

      const setTheme = (mode) => {
        localStorage.setItem("theme", mode);
        applyTheme(mode);
        updateThemeButtons();
      };

      const savedTheme = localStorage.getItem("theme") || "auto"; // default respects OS
      applyTheme(savedTheme);
      updateThemeButtons();

      // keep in sync with OS when in auto
      const mql = window.matchMedia("(prefers-color-scheme: dark)");
      mql.addEventListener("change", () => {
        if ((localStorage.getItem("theme") || "auto") === "auto") {
          applyTheme("auto");
          updateThemeButtons();
        }
      });

      const toggleTheme = () => {
        const isDark = document.documentElement.classList.contains("dark");
        setTheme(isDark ? "light" : "dark");
      };

      $("#themeToggle")?.addEventListener("click", toggleTheme);
      $("#themeToggleMobile")?.addEventListener("click", toggleTheme);

      // mobile menu
      $("#mobileMenuBtn")?.addEventListener("click", () => {
        $("#mobileMenu").classList.toggle("hidden");
      });

      // copy buttons
      const copyText = async (txt) => {
        try {
          await navigator.clipboard.writeText(txt);
          showToast("Copied!");
        } catch (e) {
          const ta = document.createElement("textarea");
          ta.value = txt;
          document.body.appendChild(ta);
          ta.select();
          try {
            document.execCommand("copy");
            showToast("Copied!");
          } finally {
            ta.remove();
          }
        }
      };
      $$(".copy-btn").forEach((btn) => {
        if (btn.dataset.copy) {
          btn.addEventListener("click", () => {
            const code =
              document.querySelector(btn.dataset.copy)?.innerText || "";
            copyText(code);
          });
        } else {
          btn.addEventListener("click", () => {
            const pre = btn.closest("pre");
            const code = pre ? pre.innerText.replace(/^Copy\s*/, "") : "";
            copyText(code);
          });
        }
      });

      // tabs
      $$(".tab").forEach((tab) => {
        tab.addEventListener("click", () => {
          const name = tab.dataset.tab;
          $$(".tab").forEach((t) => {
            t.classList.remove(
              "bg-pink-100",
              "text-pink-900",
              "dark:bg-pink-900/30",
              "dark:text-pink-100"
            );
          });
          tab.classList.add(
            "bg-pink-100",
            "text-pink-900",
            "dark:bg-pink-900/30",
            "dark:text-pink-100"
          );
          $$(".tabpanel").forEach((p) =>
            p.classList.toggle("hidden", p.dataset.panel !== name)
          );
        });
      });

      // scrollspy
      const links = $$(".navlink");
      const sections = ["why", "install", "playground", "faq"].map((id) =>
        document.getElementById(id)
      );
      const spObs = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              links.forEach((l) => l.classList.remove("text-pink-600"));
              const active = links.find(
                (l) => l.getAttribute("href") === `#${entry.target.id}`
              );
              active?.classList.add("text-pink-600");
            }
          });
        },
        { rootMargin: "-40% 0px -55% 0px", threshold: 0.01 }
      );
      sections.forEach((sec) => sec && spObs.observe(sec));

      // year
      $("#year").textContent = new Date().getFullYear();

      // scroll to top
      const toTop = $("#toTop");
      window.addEventListener("scroll", () => {
        toTop.classList.toggle("hidden", window.scrollY < 600);
      });
      toTop.addEventListener("click", () =>
        window.scrollTo({ top: 0, behavior: "smooth" })
      );

      // Playground: mini renderer (demo only). Guard if elements exist.
      const tplEl = document.getElementById("tpl");
      const varsEl = document.getElementById("vars");
      const DEFAULT_TPL = tplEl ? tplEl.value.trim() : "";
      const DEFAULT_VARS = varsEl ? varsEl.value.trim() : "";

      const parseBlocks = (tpl) => {
        const re =
          /{%\s*block\s+([\w\-]+)(?:\s+with\s+traits\s*=\s*\[(.*?)\]\s*)?%}([\s\S]*?){%\s*endblock\s*%}/g;
        const blocks = [];
        let m;
        while ((m = re.exec(tpl)) !== null) {
          blocks.push({
            name: m[1],
            traitsRaw: m[2] || "",
            content: m[3].trim(),
          });
        }
        return blocks;
      };
      const applyDefaults = (s, vars) => {
        return s.replace(
          /{{\s*([\w.]+)\s*\|\s*default:\s*([^}]+)\s*}}/g,
          (_, key, defVal) => {
            const k = key.trim();
            const v = k.split(".").reduce((o, p) => o && o[p], vars);
            const d = defVal
              .trim()
              .replace(/^"(.*)"$/, "$1")
              .replace(/^'(.*)'$/, "$1");
            return v === undefined || v === null || v === "" ? d : String(v);
          }
        );
      };
      const interpolate = (s, vars) => {
        s = applyDefaults(s, vars);
        return s.replace(/{{\s*([\w.]+)\s*}}/g, (_, key) => {
          const v = key.split(".").reduce((o, p) => o && o[p], vars);
          return v === undefined || v === null ? "" : String(v);
        });
      };
      const renderYAPL = (tpl, vars) => {
        const blocks = parseBlocks(tpl);
        let out = "";
        blocks.forEach((b) => {
          out += interpolate(b.content, vars).trim() + "\n\n";
        });
        return out.trim();
      };

      document.getElementById("renderBtn")?.addEventListener("click", () => {
        const tpl = $("#tpl").value;
        let vars = {};
        try {
          vars = JSON.parse($("#vars").value || "{}");
        } catch (e) {
          $("#renderStatus").textContent = "Invalid JSON in variables.";
          return;
        }
        const t0 = performance.now();
        const result = renderYAPL(tpl, vars);
        const t1 = performance.now();
        $("#output").textContent = result;
        if (window.Prism) Prism.highlightElement($("#output"));
        $("#renderStatus").textContent = `Rendered in ${(t1 - t0).toFixed(
          1
        )}ms`;
      });

      document.getElementById("copyOutput")?.addEventListener("click", () => {
        copyText($("#output").textContent || "");
      });
      document.getElementById("resetTpl")?.addEventListener("click", () => {
        $("#tpl").value = DEFAULT_TPL;
      });
      document.getElementById("resetVars")?.addEventListener("click", () => {
        $("#vars").value = DEFAULT_VARS;
      });
      // code tabs for hero
      const codeTabs = $$(".code-tab");
      const codePanels = $$(".codepanel");
      const codeTitleEl = $("#codeTitle");
      const extMap = { json: "json", markdown: "md", text: "txt" };
      codeTabs.forEach((btn) => {
        btn.addEventListener("click", () => {
          const name = btn.dataset.code;
          codeTabs.forEach((b) =>
            b.classList.remove(
              "bg-pink-100",
              "text-pink-900",
              "dark:bg-pink-900/30",
              "dark:text-pink-100"
            )
          );
          btn.classList.add(
            "bg-pink-100",
            "text-pink-900",
            "dark:bg-pink-900/30",
            "dark:text-pink-100"
          );
          codePanels.forEach((p) =>
            p.classList.toggle("hidden", p.dataset.code !== name)
          );
          if (codeTitleEl)
            codeTitleEl.textContent = `hello.${extMap[name] || name}.yapl`;
          // re-highlight visible panel
          const active = codePanels.find(
            (p) => !p.classList.contains("hidden")
          );
          if (active && window.Prism) {
            const code = active.querySelector("code");
            if (code) Prism.highlightElement(code);
          }
        });
      });
      // highlight default visible
      (function () {
        const active = document.querySelector(".codepanel:not(.hidden) code");
        if (active && window.Prism) Prism.highlightElement(active);
      })();
    </script>
  </body>
</html>
